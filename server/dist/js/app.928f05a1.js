(function(t){function e(e){for(var i,s,a=e[0],c=e[1],u=e[2],m=0,d=[];m<a.length;m++)s=a[m],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0359":function(t,e,n){},"1f07":function(t,e,n){"use strict";n("e6c5")},2998:function(t,e,n){},"2a0d":function(t,e,n){"use strict";n("365b")},"2f28":function(t,e,n){"use strict";n("ada6")},"35cd":function(t,e,n){},"365b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=n("2f62"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Game",{attrs:{msg:"Welcome to Your Vue.js App"}}),n("Auth")],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Radar",{attrs:{size:t.radarSize,map:t.radarData.map}}),n("ControlPanel",{attrs:{size:t.controlSize}})],1)},c=[],u=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"radar-container",style:t.compStyle},[n("img",{staticClass:"radar-sprite",style:t.compStyle,attrs:{src:"http://ferrisgame.ru:8080/assets/images/radar.png",alt:"Фон радара"}}),t._l(t.map.pathPoints,(function(e){return n("div",{key:1e5*e.x+e.y,staticClass:"path-point",style:t.addShiftToStyle(e,t.ppSize,t.gridSize/t.smallifier)})})),t._l(t.points,(function(e){return n("Point",{key:e.id,attrs:{current:e.current,active:e.active,position:e.position,size:t.gridSize}})})),n("img",{staticClass:"player-icon",style:t.addShiftToStyle({x:t.map.logic.current.x,y:t.map.logic.current.y},t.getSizeStyle(2*t.gridSize),2*t.gridSize),attrs:{src:"http://ferrisgame.ru:8080/assets/images/player.png",alt:"игрок"}}),n("img",{staticClass:"radar-sprite",style:t.compStyle,attrs:{src:"http://ferrisgame.ru:8080/assets/images/radar-border.png",alt:"Рамка радара"}})],2)}),l=[],m=(n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className,style:t.stylePosition})}),d=[],p={name:"Point",props:{current:Boolean,active:Boolean,position:{x:Number,y:Number},size:Number,description:Object},computed:{className:function(){return"point"+(this.active?" point-active":"")+(this.current?" point-current":"")},stylePosition:function(){console.log(this.size),console.log(this.position.x);var t="left:"+(this.position.x-this.size/2)+"px; top:"+(this.position.y-this.size/2)+"px; width: "+this.size+"px; height: "+this.size+"px; "+(this.current?"":"border-radius: "+this.size+"px; ");return console.log(t),t}},mounted:function(){console.log(this)}},g=p,h=(n("a87b"),n("2877")),f=Object(h["a"])(g,m,d,!1,null,"64ee1dd7",null),y=f.exports,x={name:"Radar",components:{Point:y},props:{angle_speed:Number,range:Number,map:{pathPoints:[],vertexes:[],logic:{current:{id:Number,x:Number,y:Number},dir:String},items:Object},size:Number},methods:{calcPosition:function(t){return{x:t.x*this.gridSize+this.shift.x,y:t.y*this.gridSize+this.shift.y}},addShiftToStyle:function(t,e,n){var i=this.calcPosition(t);return e+" border-radius:2rem; left:"+(i.x-n/2)+"px; top:"+(i.y-n/2)+"px;"},getSizeStyle:function(t){return"height:"+t+"px; width:"+t+"px; "}},computed:{gridSize:function(){return this.size/20},shift:function(){return{x:this.size/2-this.map.logic.current.x*this.gridSize,y:this.size/2-this.map.logic.current.y*this.gridSize}},points:function(){var t=this;return this.map.vertexes.map((function(e){return{current:e.id===t.map.logic.current.id,active:!1,position:t.calcPosition(e)}}))},compStyle:function(){return"height:"+this.size+"px; width:"+this.size+"px;"},ppSize:function(){return"height:"+this.gridSize/this.smallifier+"px; width:"+this.gridSize/this.smallifier+"px; "},smallifier:function(){return console.log(this.map.pathPoints.length),Math.sqrt(Math.sqrt(this.map.pathPoints.length))}}},b=x,v=(n("9355"),Object(h["a"])(b,u,l,!1,null,"e13da00a",null)),S=v.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control-container",style:t.containerStyle},[n("div",{staticClass:"bottom-controls"},[n("img",{staticClass:"background-img",style:t.containerStyle,attrs:{src:"http://ferrisgame.ru:8080/assets/images/panel-background.png",alt:"Фон"}}),n("Timer"),n("div",{staticClass:"button-blocks"},[n("ButtonsBlock",{attrs:{matrix:t.move}}),n("ButtonsBlock",{attrs:{matrix:t.fire}})],1)],1),n("img",{staticClass:"background-img",style:t.containerStyle,attrs:{src:"http://ferrisgame.ru:8080/assets/images/background.png",alt:"Фон"}})])},w=[],E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timer-container"},[n("img",{staticClass:"timer-img",attrs:{src:"http://ferrisgame.ru:8080/assets/images/timer.png",alt:"Часики-то тикают"}})])}],O={name:"Timer"},P=O,j=(n("1f07"),Object(h["a"])(P,E,_,!1,null,"a0fe4a72",null)),B=j.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"button-container",style:t.compStyle},[n("SpritedButton",{attrs:{"btn-name":t.matrix[0][0],empty:!t.matrix[0][0]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[0][1],empty:!t.matrix[0][1]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[0][2],empty:!t.matrix[0][2]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[1][0],empty:!t.matrix[1][0]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[1][1],empty:!t.matrix[1][1]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[1][2],empty:!t.matrix[1][2]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[2][0],empty:!t.matrix[2][0]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[2][1],empty:!t.matrix[2][1]}}),n("SpritedButton",{attrs:{"btn-name":t.matrix[2][2],empty:!t.matrix[2][2]}})],1)},k=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.empty?"empty-button":"custom-button"},[n("img",{staticClass:"button-sprite",attrs:{src:t.fullPath,alt:t.btnName}})])},C=[],H={name:"SpritedButton",props:{btnName:String,empty:Boolean},computed:{fullPath:function(){return"http://ferrisgame.ru:8080/assets/images/"+this.btnName+".png"}}},R=H,$=(n("784c"),Object(h["a"])(R,N,C,!1,null,"096ac840",null)),W=$.exports,A={name:"ButtonsBlock",components:{SpritedButton:W},props:{size:Number,matrix:[]},computed:{compStyle:function(){return"height:"+this.size+"px; width:"+this.size+"px;"}}},L=A,M=(n("2f28"),Object(h["a"])(L,T,k,!1,null,"58f026d9",null)),I=M.exports,U={name:"ControlPanel",components:{ButtonsBlock:I,Timer:B},props:{size:{w:Number,h:Number}},data:function(){return{move:[[!1,"forward",!1],["left",!1,"right"],[!1,"back",!1]],fire:[[!1,"missleF",!1],["missleL","mine","missleR"],[!1,"missleB",!1]]}},computed:{containerStyle:function(){return"height:"+this.size.h+"px; width:"+this.size.w+"px;"}}},q=U,F=(n("2a0d"),Object(h["a"])(q,z,w,!1,null,"d8cfcde6",null)),G=F.exports,D={name:"Game",components:{ControlPanel:G,Radar:S},props:{msg:String},data:function(){return{radarData:{angle_speed:1,range:1,map:{pathPoints:[{x:1,y:6},{x:0,y:7},{x:0,y:8},{x:1,y:9},{x:2,y:9},{x:3,y:9},{x:4,y:9},{x:5,y:9},{x:6,y:9},{x:7,y:9},{x:8,y:9},{x:9,y:8},{x:10,y:7},{x:10,y:6},{x:10,y:5},{x:10,y:4},{x:9,y:3},{x:2,y:7},{x:3,y:8},{x:4,y:8},{x:5,y:7},{x:3,y:6},{x:4,y:6},{x:2,y:5},{x:2,y:4},{x:5,y:5},{x:5,y:4},{x:3,y:4},{x:4,y:3},{x:2,y:2},{x:3,y:1},{x:4,y:1},{x:5,y:2},{x:1,y:3},{x:0,y:2},{x:0,y:1},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0},{x:5,y:0},{x:6,y:0},{x:7,y:0},{x:8,y:1},{x:8,y:2},{x:6,y:3},{x:7,y:3},{x:6,y:6},{x:7,y:5},{x:8,y:4}],vertexes:[{id:0,x:2,y:6,items:[],edges:{WEST:0,NORTH:1,EAST:2,SOUTH:3}},{id:1,x:5,y:6,items:[],edges:{SOUTH:4,EAST:9}},{id:2,x:8,y:3,items:[],edges:{}},{id:3,x:5,y:3,items:[],edges:{SOUTH:6,EAST:8}},{id:4,x:2,y:3,items:[],edges:{EAST:5,WEST:7}}],logic:{current:{id:0,x:2,y:6},dir:"N"},items:{}},root:Number,size:Number},radarSize:Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight),controlSize:{w:document.documentElement.clientWidth===Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight)?document.documentElement.clientWidth:document.documentElement.clientWidth-Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight),h:document.documentElement.clientHeight===Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight)?document.documentElement.clientHeight:document.documentElement.clientHeight-Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight)}}},created:function(){window.addEventListener("resize",this.myEventHandler)},destroyed:function(){window.removeEventListener("resize",this.myEventHandler)},methods:{myEventHandler:function(t){console.log(t),this.radarSize=this.getRadarSize(),this.controlSize=this.getControlSize()},getRadarSize:function(){return Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight)},getControlSize:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return{w:t===this.radarSize?t:t-this.getRadarSize(),h:e===this.radarSize?e:e-this.getRadarSize()}}}},J=D,Y=(n("f1aa"),Object(h["a"])(J,a,c,!1,null,"34eb445f",null)),V=Y.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loggedIn?n("div",[n("div",[t._v("Your login: "+t._s(t.loggedLogin))]),n("button",{on:{click:t.doLogout}},[t._v("Logout")])]):n("div",[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text",name:"login"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{on:{click:t.doRegister}},[t._v("Register")]),n("button",{on:{click:t.doLogin}},[t._v("Login")])])])},Q=[],X=function(t){return{register:function(e,n){return t.post("/user/register",{login:e,password:n})},login:function(e,n){return t.post("/user/login",{login:e,password:n})},logout:function(){return t.post("/user/logout")},createRoom:function(){return t.post("/game/createRoom")},joinRoom:function(e){return t.post("/game/joinRoom",{roomId:e})},getField:function(){return t.get("/game/getField")}}},Z=(n("d3b7"),n("bc3a")),tt=n.n(Z),et=tt.a.create({baseURL:"http://ferrisgame.ru:8080/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});et.interceptors.request.use((function(t){var e=localStorage.getItem("accessToken");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)}));var nt=et,it={name:"Auth",data:function(){return{login:"",password:""}},computed:{loggedLogin:function(){return this.$store.state.user.login},loggedIn:function(){return null!=this.$store.state.user.login}},methods:{doLogin:function(){this.$store.dispatch("user/login",{login:this.login,password:this.password})},doLogout:function(){this.$store.dispatch("user/logout")},doRegister:function(){X(nt).register(this.login,this.password).then((function(){alert("Ok")})).catch((function(t){alert(t)}))}}},rt=it,ot=Object(h["a"])(rt,K,Q,!1,null,"058300ef",null),st=ot.exports,at={name:"App",components:{Game:V,Auth:st}},ct=at,ut=(n("034f"),Object(h["a"])(ct,o,s,!1,null,null,null)),lt=ut.exports,mt={namespaced:!0,state:function(){return{login:null}},mutations:{login:function(t,e){t.login=e},logout:function(t){t.login=null}},actions:{login:function(t,e){return X(nt).login(e.login,e.password).then((function(e){var n=e.data;return localStorage.setItem("accessToken",n.accessToken),t.commit("login",n.login),n})).catch((function(t){console.log(t)}))},logout:function(t){return X(nt).logout().then((function(){localStorage.removeItem("accessToken"),t.commit("logout")})).catch((function(t){console.log(t)}))}}},dt={namespaced:!0,state:function(){return{field:{}}},mutations:{},actions:{}};i["a"].use(r["a"]);var pt=new r["a"].Store({modules:{user:mt,game:dt}});i["a"].config.productionTip=!1,i["a"].use(r["a"]),new i["a"]({render:function(t){return t(lt)},store:pt}).$mount("#app")},"733b":function(t,e,n){},"784c":function(t,e,n){"use strict";n("35cd")},"85ec":function(t,e,n){},9355:function(t,e,n){"use strict";n("2998")},a87b:function(t,e,n){"use strict";n("733b")},ada6:function(t,e,n){},e6c5:function(t,e,n){},f1aa:function(t,e,n){"use strict";n("0359")}});
//# sourceMappingURL=app.928f05a1.js.map